@model List<PAW.Models.ViewModels.TableroViewModel>
@{
    ViewData["Title"] = "Mis Tableros";
}

<h2 class="mb-4">@ViewData["Title"]</h2>

@if (TempData["Error"] != null)
{
    <div class="alert alert-danger">@TempData["Error"]</div>
}

<div class="board-container">
    @foreach (var tablero in Model)
    {
        <div class="board">
            <div class="board-header">
                <h3>@tablero.Titulo</h3>
                <small>@tablero.FechaCreacion?.ToString("dd/MM/yyyy")</small>
            </div>

            <div class="lists-container">
                @if (tablero.Lista.Any())
                {
                    @foreach (var lista in tablero.Lista)
                    {
                        <div class="list-column">
                            <div class="list-header">
                                <strong>@lista.Titulo</strong>
                            </div>

                            <div class="cards-container">
                                @if (lista.ListaTarjetas.Any())
                                {
                                    @foreach (var tarjeta in lista.ListaTarjetas)
                                    {
                                        <div class="card-item">
                                            <strong>@tarjeta.Titulo</strong>
                                            @if (!string.IsNullOrEmpty(tarjeta.Descripcion))
                                            {
                                                <p class="small mb-0">@tarjeta.Descripcion</p>
                                            }
                                        </div>
                                    }
                                }
                                else
                                {
                                    <p class="text-muted small">No hay tarjetas</p>
                                }
                            </div>
                        </div>
                    }
                }
                else
                {
                    <p class="text-muted small">No hay listas</p>
                }
            </div>

            <div class="board-footer">
                <a asp-controller="Board" asp-action="Details" asp-route-id="@tablero.Id" class="btn btn-outline-primary btn-sm">
                    Abrir tablero
                </a>
            </div>
        </div>
    }
</div>

<style>
    /* Contenedor general */
    .board-container {
        display: flex;
        flex-direction: column;
        gap: 2rem;
    }

    /* Tablero */
    .board {
        background-color: #f8f9fa;
        border-radius: 10px;
        padding: 1rem;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    /* Cabecera tablero */
    .board-header {
        text-align: center;
        margin-bottom: 1rem;
    }

    /* Contenedor de listas */
    .lists-container {
        display: flex;
        gap: 1rem;
        overflow-x: auto;
        padding-bottom: 0.5rem;
    }

    /* Columnas de listas */
    .list-column {
        background-color: #e2e6ea;
        border-radius: 8px;
        min-width: 250px;
        max-width: 280px;
        padding: 0.5rem;
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
        flex-shrink: 0;
    }

    /* Cabecera de lista */
    .list-header {
        font-weight: bold;
        margin-bottom: 0.5rem;
        text-align: center;
    }

    /* Tarjetas */
    .cards-container {
        display: flex;
        flex-direction: column;
        gap: 0.5rem;
    }

    .card-item {
        background-color: #ffffff;
        border-radius: 6px;
        padding: 0.5rem;
        box-shadow: 0 2px 6px rgba(0,0,0,0.1);
        transition: transform 0.15s, box-shadow 0.15s;
        cursor: pointer;
    }

        .card-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

    /* Footer */
    .board-footer {
        text-align: center;
        margin-top: 1rem;
    }

    /* Scroll horizontal suave */
    .lists-container::-webkit-scrollbar {
        height: 8px;
    }

    .lists-container::-webkit-scrollbar-thumb {
        background: rgba(0,0,0,0.2);
        border-radius: 4px;
    }
</style>
